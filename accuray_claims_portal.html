<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accuray | Claims Portal Standalone</title>
    <!-- Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.3); }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f8fafc; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Mock Data & Types ---
        const ClaimStatus = {
            PENDING: 'pending',
            UNDER_REVIEW: 'under_review',
            APPROVED: 'approved',
            REJECTED: 'rejected'
        };

        const INITIAL_CLAIMS = [
            {
                id: 'CLM-001',
                title: 'Synchrony Image Guidance Technology',
                description: 'Synchrony is the only technology that uses image guidance to automatically adapt and synchronize the radiation beam to the position of the tumor in real-time.',
                submittedBy: 'Sarah Johnson',
                submissionDate: '2025-10-15',
                type: 'Competitive',
                offering: 'Synchrony',
                status: ClaimStatus.PENDING,
                requiredRoles: ['Product', 'Clinical', 'Regulatory', 'Legal'],
                approvals: [],
                currentReviewer: 'Product',
                comments: [],
                riskLevel: 'High',
                aiAnalysis: {
                    summary: "Competitive 'only technology' claim is high risk. Requires exhaustive market analysis.",
                    suggestedEvidence: ["Competitive Landscape Audit", "Peer-reviewed Synchrony Studies"],
                    regulatoryRisk: "High regulatory scrutiny."
                },
                evidence: []
            },
            {
                id: 'CLM-003',
                title: 'ClearRT MR Imaging Integration',
                description: 'ClearRT avoids the distortion caused by MR imaging and the artifacts associated with conventional cone beam CT by using hardware-based image reconstruction.',
                submittedBy: 'Emily Rodriguez',
                submissionDate: '2025-10-20',
                type: 'Competitive',
                offering: 'ClearRT',
                status: ClaimStatus.APPROVED,
                requiredRoles: ['Product', 'Clinical', 'Regulatory', 'Engineering'],
                approvals: [
                    { role: 'Product', approvedBy: 'Alex Smith', timestamp: '2025-10-21' },
                    { role: 'Clinical', approvedBy: 'Dr. House', timestamp: '2025-10-21' },
                    { role: 'Engineering', approvedBy: 'Steve Woz', timestamp: '2025-10-22' },
                    { role: 'Regulatory', approvedBy: 'Jane Doe', timestamp: '2025-10-23' }
                ],
                currentReviewer: null,
                comments: [{ author: 'Engineering Team', text: 'Confirmed hardware-based reconstruction. [MasterControl: DOC-9921]', timestamp: '2025-10-22' }],
                riskLevel: 'Medium',
                aiAnalysis: {
                    summary: "Highly technical claim regarding hardware-based reconstruction.",
                    suggestedEvidence: ["Image Reconstruction Whitepaper"],
                    regulatoryRisk: "Technical verification required."
                },
                evidence: [{ id: 'ev-1', name: 'Hardware_Reconstruction_Docs.pdf' }]
            }
        ];

        // --- Components ---

        const Icon = ({ name, size = 20, className = "" }) => {
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        const Badge = ({ children, color = 'blue' }) => {
            const colors = {
                blue: 'bg-blue-50 text-blue-700 border-blue-200',
                green: 'bg-emerald-50 text-emerald-700 border-emerald-200',
                red: 'bg-rose-50 text-rose-700 border-rose-200',
                yellow: 'bg-amber-50 text-amber-700 border-amber-200',
                slate: 'bg-slate-50 text-slate-700 border-slate-200',
            };
            return (
                <span className={`px-3 py-1 rounded-xl text-[10px] font-black uppercase tracking-wider border ${colors[color]}`}>
                    {children}
                </span>
            );
        };

        const Sidebar = ({ userRole, activePage, setActivePage, onLogout, pendingCount }) => (
            <aside className="w-72 bg-[#0f172a] text-white flex flex-col fixed h-full z-30 shadow-2xl">
                <div className="p-8">
                    <div className="flex items-center gap-3 mb-12">
                        <div className="p-3 bg-gradient-to-br from-blue-500 to-blue-800 rounded-2xl">
                            <Icon name="cpu" className="text-white" />
                        </div>
                        <div>
                            <h1 className="text-xl font-black">Accuray</h1>
                            <p className="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Claims Portal</p>
                        </div>
                    </div>
                    <div className="bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50 mb-8">
                        <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Authenticated As</p>
                        <p className="text-sm font-semibold">{userRole} Team</p>
                    </div>
                    <nav className="space-y-2">
                        <button onClick={() => setActivePage('dashboard')} className={`w-full flex items-center justify-between px-5 py-4 rounded-2xl transition-all font-bold text-sm ${activePage === 'dashboard' ? 'bg-blue-600 text-white shadow-xl shadow-blue-500/30' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}>
                            <div className="flex items-center gap-3"><Icon name="layout-dashboard" /> Pending</div>
                            {pendingCount > 0 && <span className="bg-rose-500 text-white text-[10px] px-2 py-0.5 rounded-full">{pendingCount}</span>}
                        </button>
                        <button onClick={() => setActivePage('repository')} className={`w-full flex items-center gap-3 px-5 py-4 rounded-2xl transition-all font-bold text-sm ${activePage === 'repository' ? 'bg-blue-600 text-white shadow-xl shadow-blue-500/30' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}>
                            <Icon name="database" /> Repository
                        </button>
                    </nav>
                </div>
                <div className="mt-auto p-6 border-t border-slate-800">
                    <button onClick={onLogout} className="w-full flex items-center gap-3 px-4 py-3 rounded-2xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all font-semibold">
                        <Icon name="log-out" /> Sign Out
                    </button>
                </div>
            </aside>
        );

        const ClaimDetail = ({ claim, userRole, onBack, onAction }) => {
            const [comment, setComment] = useState('');
            const [masterControlId, setMasterControlId] = useState('');
            const canReview = claim.currentReviewer === userRole;

            useEffect(() => { lucide.createIcons(); }, []);

            return (
                <div className="max-w-5xl mx-auto space-y-8 animate-fade">
                    <button onClick={onBack} className="flex items-center gap-2 text-blue-600 font-bold hover:underline">
                        <Icon name="arrow-left" size={18} /> Back to Matrix
                    </button>
                    <div className="bg-white border-2 border-slate-200 rounded-[40px] shadow-2xl overflow-hidden">
                        <div className="p-12 border-b border-slate-100 bg-slate-50/50">
                            <div className="flex justify-between items-start mb-6">
                                <div className="space-y-2">
                                    <Badge color="slate">{claim.offering}</Badge>
                                    <h1 className="text-4xl font-black text-slate-900 tracking-tight">{claim.title}</h1>
                                    <p className="text-slate-400 font-mono text-sm">ID: {claim.id}</p>
                                </div>
                                <Badge color={claim.status === 'approved' ? 'green' : 'yellow'}>{claim.status}</Badge>
                            </div>
                            <div className="p-8 bg-slate-900 text-white rounded-[32px]">
                                <p className="text-xl font-medium italic leading-relaxed">"{claim.description}"</p>
                            </div>
                        </div>
                        <div className="p-12 grid grid-cols-1 lg:grid-cols-3 gap-12">
                            <div className="lg:col-span-2 space-y-12">
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div className="bg-slate-50 p-8 rounded-3xl border border-slate-200">
                                        <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><Icon name="layers" className="text-blue-600" /> Attributes</h3>
                                        <div className="space-y-3 text-sm">
                                            <div className="flex justify-between"><span>Owner</span><span className="font-bold">{claim.submittedBy}</span></div>
                                            <div className="flex justify-between"><span>Date</span><span className="font-bold">{claim.submissionDate}</span></div>
                                        </div>
                                    </div>
                                    <div className="bg-slate-50 p-8 rounded-3xl border border-slate-200">
                                        <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><Icon name="upload" className="text-blue-600" /> Evidence Locker</h3>
                                        <div className="p-3 bg-white border border-slate-200 rounded-xl flex items-center justify-between text-xs font-bold">
                                            <div className="flex items-center gap-2"><Icon name="file-text" size={16} /> MasterControl_Report.pdf</div>
                                            <Icon name="arrow-up-right" size={14} className="text-slate-300" />
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-indigo-50 border-2 border-indigo-100 p-8 rounded-[32px] space-y-4">
                                    <h3 className="text-lg font-bold text-indigo-900 flex items-center gap-2"><Icon name="sparkles" /> AI Suggestion</h3>
                                    <p className="text-sm italic font-medium">{claim.aiAnalysis?.summary}</p>
                                </div>
                            </div>
                            <div className="space-y-8">
                                <div className="bg-[#0f172a] text-white p-8 rounded-[32px]">
                                    <h3 className="text-sm font-black uppercase tracking-widest text-blue-400 mb-6">Workflow</h3>
                                    <div className="space-y-4">
                                        {claim.requiredRoles.map(role => (
                                            <div key={role} className="flex items-center justify-between text-sm opacity-80">
                                                <span>{role} Team</span>
                                                {claim.approvals.some(a => a.role === role) ? <Icon name="check-circle-2" className="text-emerald-400" /> : <Icon name="clock" />}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                {canReview && (
                                    <div className="bg-white p-8 rounded-[32px] border-2 border-blue-600 shadow-xl space-y-6">
                                        <h3 className="text-xl font-bold">Evaluation</h3>
                                        <div className="space-y-2">
                                            <label className="text-[10px] font-black uppercase text-slate-400">MasterControl Doc No *</label>
                                            <input value={masterControlId} onChange={e => setMasterControlId(e.target.value)} className="w-full px-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-xl text-sm font-bold outline-none focus:border-blue-500" placeholder="DOC-XXXX-REV-X" />
                                        </div>
                                        <textarea value={comment} onChange={e => setComment(e.target.value)} className="w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-sm min-h-[100px] outline-none focus:border-blue-500" placeholder="Review notes..." />
                                        <div className="space-y-2">
                                            <button onClick={() => onAction('approve', comment, masterControlId)} disabled={!masterControlId} className={`w-full py-4 bg-emerald-600 text-white rounded-xl font-bold uppercase text-xs transition-all ${!masterControlId && 'opacity-50 cursor-not-allowed'}`}>Approve</button>
                                            <button onClick={() => onAction('review', comment)} className="w-full py-4 bg-amber-500 text-white rounded-xl font-bold uppercase text-xs">Under Review</button>
                                            <button onClick={() => onAction('reject', comment)} className="w-full py-4 bg-rose-500 text-white rounded-xl font-bold uppercase text-xs">Reject</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [userRole, setUserRole] = useState('Product');
            const [activePage, setActivePage] = useState('dashboard');
            const [claims, setClaims] = useState(INITIAL_CLAIMS);
            const [selectedClaimId, setSelectedClaimId] = useState(null);

            useEffect(() => { lucide.createIcons(); }, [isLoggedIn, activePage, selectedClaimId]);

            const pendingClaims = claims.filter(c => c.currentReviewer === userRole && c.status !== ClaimStatus.APPROVED);

            const handleReview = (id, action, comment, mcId) => {
                setClaims(prev => prev.map(c => {
                    if (c.id !== id) return c;
                    if (action === 'review') return { ...c, status: ClaimStatus.UNDER_REVIEW };
                    if (action === 'reject') return { ...c, status: ClaimStatus.REJECTED, currentReviewer: null };
                    
                    const newApprovals = [...c.approvals, { role: userRole, timestamp: new Date().toISOString() }];
                    const remaining = c.requiredRoles.filter(r => !newApprovals.some(a => a.role === r));
                    return { 
                        ...c, 
                        approvals: newApprovals, 
                        status: remaining.length === 0 ? ClaimStatus.APPROVED : ClaimStatus.UNDER_REVIEW,
                        currentReviewer: remaining.length > 0 ? remaining[0] : null
                    };
                }));
                setSelectedClaimId(null);
            };

            if (!isLoggedIn) {
                return (
                    <div className="min-h-screen bg-slate-900 flex items-center justify-center p-8">
                        <div className="bg-white w-full max-w-md p-12 rounded-[48px] shadow-2xl space-y-8 animate-fade">
                            <div className="text-center space-y-4">
                                <div className="mx-auto w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-white"><Icon name="cpu" size={32} /></div>
                                <h1 className="text-3xl font-black">Accuray</h1>
                                <p className="text-xs font-bold uppercase tracking-widest text-slate-400">Claims Portal Login</p>
                            </div>
                            <div className="space-y-4">
                                <select value={userRole} onChange={e => setUserRole(e.target.value)} className="w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold outline-none focus:border-blue-500 appearance-none">
                                    <option>Product</option><option>Clinical</option><option>Regulatory</option><option>Legal</option><option>Engineering</option>
                                </select>
                                <button onClick={() => setIsLoggedIn(true)} className="w-full py-5 bg-blue-600 text-white rounded-2xl font-black uppercase text-sm tracking-widest shadow-xl shadow-blue-200 hover:scale-[1.02] transition-all">Sign In</button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="flex min-h-screen">
                    <Sidebar userRole={userRole} activePage={activePage} setActivePage={setActivePage} onLogout={() => setIsLoggedIn(false)} pendingCount={pendingClaims.length} />
                    <main className="flex-1 ml-72 p-12 space-y-8">
                        <header className="flex justify-between items-center">
                            <div>
                                <h2 className="text-4xl font-black text-slate-900 tracking-tight">{selectedClaimId ? 'Review Claim' : activePage === 'dashboard' ? 'Pending Tasks' : 'Global Matrix'}</h2>
                                <p className="text-slate-500 font-medium">{claims.length} system claims registered</p>
                            </div>
                            <button className="p-4 bg-white rounded-2xl shadow-sm border border-slate-200"><Icon name="bell" /></button>
                        </header>

                        {selectedClaimId ? (
                            <ClaimDetail 
                                claim={claims.find(c => c.id === selectedClaimId)} 
                                userRole={userRole} 
                                onBack={() => setSelectedClaimId(null)}
                                onAction={(a, c, m) => handleReview(selectedClaimId, a, c, m)}
                            />
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 animate-fade">
                                {(activePage === 'dashboard' ? pendingClaims : claims).map(claim => (
                                    <div key={claim.id} onClick={() => setSelectedClaimId(claim.id)} className="bg-white p-8 rounded-[32px] border-2 border-slate-200 shadow-sm hover:border-blue-500 hover:shadow-2xl transition-all cursor-pointer group relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-1.5 h-full bg-blue-500" />
                                        <div className="flex justify-between mb-4"><Badge color="slate">{claim.riskLevel} Risk</Badge><span className="text-[10px] font-mono text-slate-300">{claim.id}</span></div>
                                        <h4 className="text-xl font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-2">{claim.title}</h4>
                                        <p className="text-sm text-slate-500 line-clamp-2 mb-6">{claim.description}</p>
                                        <div className="flex justify-between items-center pt-6 border-t border-slate-50">
                                            <div className="flex items-center gap-2 text-xs font-bold text-slate-600"><div className="w-6 h-6 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600">{claim.submittedBy[0]}</div> {claim.submittedBy}</div>
                                            <Badge color={claim.status === 'approved' ? 'green' : 'yellow'}>{claim.status}</Badge>
                                        </div>
                                    </div>
                                ))}
                                {(activePage === 'dashboard' ? pendingClaims : claims).length === 0 && (
                                    <div className="col-span-2 py-20 text-center bg-white rounded-[40px] border-2 border-dashed border-slate-200 text-slate-400 font-bold">No claims match current filter.</div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>