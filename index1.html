<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accuray Claims Approval System</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="module">
        import React, { useState } from 'https://esm.sh/react@18';
        import ReactDOM from 'https://esm.sh/react-dom@18/client';
        import * as LucideIcons from 'https://esm.sh/lucide-react@0.263.1';

        const { ChevronRight, Search, Check, X, FileText, Clock, CheckCircle, XCircle, AlertCircle, Home, Database, Users, Bell, LogOut } = LucideIcons;

        function ClaimsApprovalPrototype() {
          const [currentPage, setCurrentPage] = useState('login');
          const [userRole, setUserRole] = useState('');
          const [selectedClaim, setSelectedClaim] = useState(null);
          const [searchTerm, setSearchTerm] = useState('');
          const [filterStatus, setFilterStatus] = useState('all');
          const [showCommentModal, setShowCommentModal] = useState(false);
          const [comment, setComment] = useState('');
          const [claims, setClaims] = useState([
            {
              id: 'CLM-001',
              title: 'Synchrony Image Guidance Technology',
              description: 'Synchrony is the only technology that uses image guidance to automatically adapt and synchronize the radiation beam to the position of the tumor in real-time.',
              submittedBy: 'Sarah Johnson',
              submissionDate: '2025-10-15',
              type: 'Competitive',
              theme: 'Product',
              offering: 'Synchrony',
              status: 'pending',
              reviewers: ['Product', 'Clinical', 'Regulatory', 'Legal'],
              currentReviewer: 'Product',
              approvals: [],
              rejections: [],
              comments: []
            },
            {
              id: 'CLM-002',
              title: 'ClearRT Precision Treatment',
              description: 'Deliver more personalized and more precise treatment plans for more patients.',
              submittedBy: 'Michael Chen',
              submissionDate: '2025-10-18',
              type: 'Clinical',
              theme: 'Software',
              offering: 'Precision',
              status: 'pending',
              reviewers: ['Product', 'Clinical', 'Engineering'],
              currentReviewer: 'Clinical',
              approvals: ['Product'],
              rejections: [],
              comments: []
            },
            {
              id: 'CLM-003',
              title: 'ClearRT MR Imaging Integration',
              description: 'ClearRT avoids the distortion caused by MR imaging and the artifacts associated with conventional cone beam CT by using hardware-based image reconstruction.',
              submittedBy: 'Emily Rodriguez',
              submissionDate: '2025-10-20',
              type: 'Competitive',
              theme: 'Software',
              offering: 'ClearRT',
              status: 'approved',
              reviewers: ['Product', 'Clinical', 'Regulatory', 'Engineering'],
              currentReviewer: null,
              approvals: ['Product', 'Clinical', 'Regulatory', 'Engineering'],
              rejections: [],
              comments: []
            },
            {
              id: 'CLM-004',
              title: 'ClearRT Treatment Time Efficiency',
              description: 'It takes an image reconstruction in minutes and the industry-leading image quality means clinicians can more confidently proceed with treatment.',
              submittedBy: 'David Park',
              submissionDate: '2025-10-22',
              type: 'Technological',
              theme: 'Software',
              offering: 'ClearRT',
              status: 'rejected',
              reviewers: ['Product', 'Clinical', 'Regulatory'],
              currentReviewer: null,
              approvals: ['Product'],
              rejections: ['Clinical'],
              comments: [{ reviewer: 'Clinical', text: 'Need specific time metrics and clinical validation data', date: '2025-10-25' }]
            },
            {
              id: 'CLM-005',
              title: 'ClearRT Anatomical Accuracy',
              description: 'The industry leading image quality and anatomical accuracy produced by ClearRT allows clinicians to quickly and confidently proceed with treatment.',
              submittedBy: 'Lisa Wang',
              submissionDate: '2025-10-24',
              type: 'Competitive',
              theme: 'Software',
              offering: 'ClearRT',
              status: 'under_review',
              reviewers: ['Product', 'Clinical', 'Regulatory', 'Engineering'],
              currentReviewer: 'Regulatory',
              approvals: ['Product', 'Clinical'],
              rejections: [],
              comments: []
            }
          ]);

          const roles = ['Product', 'Clinical', 'Regulatory', 'Engineering', 'Legal'];

          const handleLogin = (role) => {
            setUserRole(role);
            setCurrentPage('dashboard');
          };

          const handleApprove = (claimId) => {
            setClaims(claims.map(claim => {
              if (claim.id === claimId) {
                const newApprovals = [...claim.approvals, userRole];
                const remainingReviewers = claim.reviewers.filter(r => !newApprovals.includes(r));
                return {
                  ...claim,
                  approvals: newApprovals,
                  currentReviewer: remainingReviewers.length > 0 ? remainingReviewers[0] : null,
                  status: remainingReviewers.length === 0 ? 'approved' : 'under_review'
                };
              }
              return claim;
            }));
            setSelectedClaim(null);
          };

          const handleReject = () => {
            setShowCommentModal(true);
          };

          const submitRejection = () => {
            if (selectedClaim) {
              setClaims(claims.map(claim => {
                if (claim.id === selectedClaim.id) {
                  return {
                    ...claim,
                    rejections: [...claim.rejections, userRole],
                    status: 'rejected',
                    comments: [...claim.comments, { reviewer: userRole, text: comment, date: new Date().toISOString().split('T')[0] }]
                  };
                }
                return claim;
              }));
            }
            setShowCommentModal(false);
            setComment('');
            setSelectedClaim(null);
          };

          const getStatusColor = (status) => {
            switch(status) {
              case 'approved': return 'bg-emerald-100 text-emerald-700 border border-emerald-200';
              case 'rejected': return 'bg-rose-100 text-rose-700 border border-rose-200';
              case 'under_review': return 'bg-blue-100 text-blue-700 border border-blue-200';
              default: return 'bg-amber-100 text-amber-700 border border-amber-200';
            }
          };

          const getStatusIcon = (status) => {
            const props = { className: "w-4 h-4" };
            switch(status) {
              case 'approved': return React.createElement(CheckCircle, props);
              case 'rejected': return React.createElement(XCircle, props);
              case 'under_review': return React.createElement(Clock, props);
              default: return React.createElement(AlertCircle, props);
            }
          };

          const filteredClaims = claims.filter(claim => {
            const matchesSearch = claim.title.toLowerCase().includes(searchTerm.toLowerCase()) || claim.description.toLowerCase().includes(searchTerm.toLowerCase());
            const matchesFilter = filterStatus === 'all' || claim.status === filterStatus;
            const isPendingForUser = currentPage === 'dashboard' ? (claim.currentReviewer === userRole && claim.status !== 'approved' && claim.status !== 'rejected') : true;
            return matchesSearch && matchesFilter && (currentPage === 'repository' || isPendingForUser);
          });

          if (currentPage === 'login') {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex items-center justify-center p-4" },
              React.createElement('div', { className: "bg-white rounded-2xl shadow-2xl p-10 max-w-md w-full border border-slate-200" },
                React.createElement('div', { className: "text-center mb-8" },
                  React.createElement('div', { className: "bg-gradient-to-br from-blue-600 to-blue-800 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg" },
                    React.createElement(FileText, { className: "w-10 h-10 text-white" })
                  ),
                  React.createElement('h1', { className: "text-3xl font-bold bg-gradient-to-r from-blue-700 to-blue-900 bg-clip-text text-transparent mb-3" }, 'Accuray Claims Portal'),
                  React.createElement('p', { className: "text-slate-600 text-lg" }, 'Product Claims Matrix Approval'),
                  React.createElement('div', { className: "mt-4 pt-4 border-t border-slate-200" },
                    React.createElement('p', { className: "text-sm text-slate-500" }, 'Select your department to continue')
                  )
                ),
                React.createElement('div', { className: "space-y-3" },
                  roles.map(role => 
                    React.createElement('button', {
                      key: role,
                      onClick: () => handleLogin(role),
                      className: "w-full bg-white border-2 border-slate-200 hover:border-blue-500 hover:bg-blue-50 rounded-xl p-4 flex items-center justify-between transition-all group shadow-sm hover:shadow-md"
                    },
                      React.createElement('span', { className: "text-slate-700 font-semibold group-hover:text-blue-700" }, role + ' Team'),
                      React.createElement(ChevronRight, { className: "w-5 h-5 text-slate-400 group-hover:text-blue-600" })
                    )
                  )
                ),
                React.createElement('div', { className: "mt-8 pt-6 border-t border-slate-200 text-center" },
                  React.createElement('p', { className: "text-xs text-slate-500" }, 'Â© 2025 Accuray Incorporated - Confidential')
                )
              )
            );
          }

          return React.createElement('div', { className: "min-h-screen bg-slate-50" },
            React.createElement('div', { className: "text-center py-20" },
              React.createElement('h1', { className: "text-4xl font-bold text-slate-800 mb-4" }, 'Accuray Claims Approval System'),
              React.createElement('p', { className: "text-slate-600 text-xl mb-8" }, 'Logged in as: ' + userRole + ' Team'),
              React.createElement('p', { className: "text-slate-500" }, 'Full dashboard interface available in production version')
            )
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(ClaimsApprovalPrototype));
    </script>
</body>
</html>
